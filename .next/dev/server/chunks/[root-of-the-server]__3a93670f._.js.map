{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Sheen%20Milger%20Ochavo/Desktop/scanner/Bisdak/bisdak/app/api/parse/route.js"],"sourcesContent":["import { exec } from \"child_process\";\r\nimport { writeFile, unlink } from \"fs/promises\";\r\n\r\nexport async function POST(req) {\r\n  const code = await req.text();\r\n  const temp = \"./compiler/input.txt\";\r\n\r\n  await writeFile(temp, code);\r\n\r\n  return new Promise((resolve) => {\r\n    exec(`./compiler/parser.exe < ${temp}`, async (err, stdout) => {\r\n      await unlink(temp);\r\n\r\n      const getSection = (label) => {\r\n        const start = stdout.indexOf(label);\r\n        if (start === -1) return \"\";\r\n        const end = stdout.indexOf(\"===\", start + label.length);\r\n        return stdout.substring(\r\n          start + label.length,\r\n          end === -1 ? stdout.length : end\r\n        ).trim();\r\n      };\r\n\r\n      resolve(\r\n        new Response(\r\n          JSON.stringify({\r\n            execution: getSection(\"=== PROGRAM EXECUTION OUTPUT ===\"),\r\n            asm: getSection(\"=== GENERATED ASSEMBLY CODE ===\"),\r\n            hex: getSection(\"=== MACHINE CODE (HEX) ===\"),\r\n            bin: getSection(\"=== MACHINE CODE (BINARY) ===\"),\r\n          }),\r\n          { status: 200 }\r\n        )\r\n      );\r\n    });\r\n  });\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,KAAK,GAAG;IAC5B,MAAM,OAAO,MAAM,IAAI,IAAI;IAC3B,MAAM,OAAO;IAEb,MAAM,IAAA,kIAAS,EAAC,MAAM;IAEtB,OAAO,IAAI,QAAQ,CAAC;QAClB,IAAA,2HAAI,EAAC,CAAC,wBAAwB,EAAE,MAAM,EAAE,OAAO,KAAK;YAClD,MAAM,IAAA,+HAAM,EAAC;YAEb,MAAM,aAAa,CAAC;gBAClB,MAAM,QAAQ,OAAO,OAAO,CAAC;gBAC7B,IAAI,UAAU,CAAC,GAAG,OAAO;gBACzB,MAAM,MAAM,OAAO,OAAO,CAAC,OAAO,QAAQ,MAAM,MAAM;gBACtD,OAAO,OAAO,SAAS,CACrB,QAAQ,MAAM,MAAM,EACpB,QAAQ,CAAC,IAAI,OAAO,MAAM,GAAG,KAC7B,IAAI;YACR;YAEA,QACE,IAAI,SACF,KAAK,SAAS,CAAC;gBACb,WAAW,WAAW;gBACtB,KAAK,WAAW;gBAChB,KAAK,WAAW;gBAChB,KAAK,WAAW;YAClB,IACA;gBAAE,QAAQ;YAAI;QAGpB;IACF;AACF"}}]
}